<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="map_style.css" />
</head>
<body>
    <script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="leaflet-heat.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <div id="mapid"></div>
    <!--<div class="widget"><fieldset class="season-radio"></fieldset></div>-->

    <script>

        var mymap = L.map('mapid').setView([40.313, -98.789], 4);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            maxZoom: 18,
            id: 'rsmb.1f2i07id',
            accessToken: 'pk.eyJ1IjoicnNtYiIsImEiOiJjaXRkYmJmOWEwMDFnMnpwaXBzZm5reXgwIn0.elN7Ml0O6wPANOYfeG4reQ',
        }).addTo(mymap);

        var seasonControl = L.Control.extend({
            options: {
                position: 'bottomright'
            },

            onAdd: function (mymap) {
                var container = L.DomUtil.create('div', 'season-control widget');
                L.DomUtil.create('fieldset', 'season-radio', container);
                return container
            }
        });

        mymap.addControl(new seasonControl());

        $.getJSON("mp_data.geojson", function (data) {
            var dotIcon = L.icon({
                iconUrl: 'dot.png',
                iconSize: [3, 6]
            });
            var heatPoints = [];

            L.geoJson(data, {
                pointToLayer: function (feature, latlng) {
                    // var marker = L.marker(latlng, {icon: dotIcon});
                    // marker.bindPopup(feature.id + "</br>" + feature.properties.season["Jul"]);
                    //console.log(feature.properties.season["Jul"]);
                    var heatPoint = [latlng["lat"], latlng["lng"], feature.properties.season["Jul"]/500];
                    // console.log(heatPoint);
                    heatPoints.push(heatPoint);
                    // return marker;
                }
            }).addTo(mymap);

            var heat = L.heatLayer(heatPoints, {
                radius: 25,
                blur: 15,
                // gradient: {0.4: 'blue', 0.65: 'lime', 1: 'red'},
                maxZoom: 8
            }).addTo(mymap);
        });

        var season_array = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        for (var i = 0; i < season_array.length; i++) {
            var sLabel = "<label for=\"radio-"+i+"\">"+season_array[i]+"</label>";
            var sInput = '<input type="radio" name="radio-1" id="radio-'+i+'">';
            $ ( '.season-radio' ).append(sLabel, sInput);
        }

        $( function() {
            $( "input" ).checkboxradio({
                icon: false
            });
        });
    </script>

</body>
</html>